<html>
<head>
  <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<title>JavaScript | Rowan&#39;s Page</title>
<link rel="shortcut icon" href="https://rowanwang6.github.io/favicon.ico?v=1695113523701">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<link rel="stylesheet" href="https://rowanwang6.github.io/styles/main.css" type='text/css' media='all'>

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">



</head>
<body class="home blog ct-body standard">
<div id="overflow-container" class="overflow-container">
  <a class="skip-content" href="#main">Skip to content</a>
  <header id="site-header" class="site-header" role="banner">
    <div class='top-navigation top-navigation-important'>
        <div class='container'>
            <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
                <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fa fa-plus"></i></button>
                <div class="menu">
                    <ul id="menu-secondary-items" class="menu-secondary-items">
                        
                        
                            
                        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
                            <a href="https://rowanwang6.github.io/tag/web/">web</a>
                        </li>
                            
                        
                            
                        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
                            <a href="https://rowanwang6.github.io/tag/CV/">Computer Vison</a>
                        </li>
                            
                        
                            
                        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
                            <a href="https://rowanwang6.github.io/tag/myself/">Myself</a>
                        </li>
                            
                        
                    </ul>
                </div>
            </div>
            <ul class="social-media-icons">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </div>
    </div>

    <div class="container">
        <div id="title-info" class="title-info">
            <div id='site-title' class='site-title'>
                <a href="https://rowanwang6.github.io">  Rowan&#39;s Page </a>
            </div>
        </div>
        <button id="toggle-navigation" class="toggle-navigation">
            <i class="fa fa-bars"></i>
        </button>
        <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
        <div id="menu-primary" class="menu-container menu-primary" role="navigation">
            <p class="site-description"></p>
            <div class="menu">
                <ul id="menu-primary-items" class="menu-primary-items">
                     
                        
                            <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item'>
                                <a href="/">Home Page</a>
                            </li>
                        
                    
                        
                            <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item'>
                                <a href="/tags">Tags</a>
                            </li>
                        
                    
                        
                            <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item'>
                                <a href="/archives">Archives</a>
                            </li>
                        
                    
                        
                            <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item'>
                                <a href="/post/about">About</a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </div>


</header>


  <div id="main" class="main" role="main">
    <div id="loop-container" class="loop-container">
      <div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">
        

        <div class="entry-meta">
          <span class="date">· 2022-07-06 ·</span> <span> / </span>
          <span class="author">
            <a href="https://rowanwang6.github.io" title="" rel="author"> xkwang7-c@my.cityu.edu.hk</a>
          </span>
          
        </div>
        <div class='entry-header'>
          <h1 class='entry-title'>JavaScript</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <blockquote>
<p>JavaScript is a high-level, object-oriented, multi-paradigm programming language.<br>
目录:<br>
<a href="#chapter-1">第一章</a><br>
<a href="#chapter-2">第二章</a></p>
</blockquote>
<h1 id="chapter-1">Chapter 1</h1>
<h2 id="1-values-and-variables">1. Values and variables</h2>
<p>Values: Smallest unit in JS, store them in variables.<br>
<code>let firstName = Jonas</code><br>
<code>firstName</code> is a box irl, Jonas is the value in the box.<br>
camelCase 驼峰命名 第一个单词小写，后面的首字母大写</p>
<h2 id="2-senven-primitive-data-type-in-javascript">2. Senven primitive data type in JavaScript</h2>
<ol>
<li>Number: Floating point numbers, used for decimals and integers  <code>let age = 23;</code></li>
<li>String: Sequence of characters, used for text</li>
<li>Boolean: Logical type that only can be <code>true</code> or <code>false</code>, used for taking decision</li>
<li>Undefined: Value taken by a variable that is not yet defined <code>let age;</code></li>
<li>Null: Also means empty value</li>
<li>Symbol(ES2015): Value that is unique and cannot be changed [Not useful for now]</li>
<li>BigInt(ES2020): Larger integers than the Number type can hold</li>
</ol>
<blockquote>
<p>Dynamic Typing: JavaScript can automatically determine the datatype of the value.</p>
</blockquote>
<h2 id="3-let-const-var">3. let, const, var</h2>
<p>let: define mutable variable<br>
const: define immutable variable (constant, no <code>const age;</code> )<br>
var: function scope</p>
<h2 id="4-operators">4. Operators</h2>
<ul>
<li>math: +, -, *, /</li>
<li>assignment:  +=, -=, ++, --, =  <code>x++; //x=x+1</code></li>
<li>comparison: &gt;, &lt;, &lt;=, &gt;=, ==</li>
<li>logic</li>
</ul>
<h3 id="41-precedence">4.1 Precedence</h3>
<p><code>()</code>优先级最高</p>
<h2 id="5-templates-literals-模板文字">5. Templates Literals 模板文字</h2>
<pre><code class="language-JavaScript">const jonasNew = `I'm ${firstName}, a ${year - birthYear} year old ${job}!`;
console.log(jonasNew);
</code></pre>
<pre><code class="language-JavaScript">//这两段输出一样  用反引号可以快速实现多行文字输出
console.log('String with \n\
multiple \n\
lines');

console.log(`String
multiple
lines`);
</code></pre>
<h2 id="6-if_else">6. If_else</h2>
<h2 id="7-type-conversion-and-coercion">7. Type Conversion and Coercion</h2>
<p><code>Number('32') --&gt; 32</code><br>
<code>+</code> 运算符强制转换所有为字符串  <code>2+3+4+'5' 输出为'95'</code><br>
<code>-</code> 运算符强制转换所有为数字</p>
<h2 id="8-truthy-and-falsy-values">8. Truthy and Falsy Values</h2>
<p>5 falsy values: 0, '', undefined, Null, NaN (Not a Number)<br>
<code>Boolean(0) 会变成false</code></p>
<pre><code class="language-JavaScript">const money = 100;$$
if (money) {
  console.log(&quot;Don't spend it all ;)&quot;);
} else {
  console.log('You should get a job!');
}
输出为'You should get a job!'，因为if else 会自动执行boolean化
</code></pre>
<h2 id="9-vs">9. <code>==</code>vs<code>===</code></h2>
<p>lose  strict<br>
<code>==</code> will perform type coercion<br>
<code>'18'==18 True</code><br>
<code>'18'===18 False</code><br>
<code>prompt('What's your favorate number?')</code></p>
<h2 id="10-statements-and-expressions-声明和表达式">10. Statements and Expressions (声明和表达式)</h2>
<p>Expressions: 3+4 能产生一个value<br>
Statements 不能</p>
<h2 id="11-ecmascript-2015-es6-es2015">11. ECMAScript 2015 / ES6 / ES2015</h2>
<p>Huge change. 向后兼容性</p>
<h1 id="hints">Hints</h1>
<ol>
<li>把脚本置于<code>&lt;body&gt;</code>元素的底部，可改善显示速度，因为脚本编译会拖慢显示。</li>
<li>更改 HTML 元素的 innerHTML 属性是在 HTML中显示数据的常用方法。</li>
<li>在 HTML 文档完全加载后使用 document.write() 将删除所有已有的 HTML。</li>
<li>在 HTML 中，JavaScript 程序由 web 浏览器执行。</li>
<li>JavaScript 语句由以下构成：值、运算符、表达式、关键词和注释。</li>
<li>JavaScript 拥有空白折叠。</li>
<li>JavaScript 语句常常通过某个关键词来标识需要执行的 JavaScript 动作。</li>
</ol>
<table>
<thead>
<tr>
<th>关键词</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>break</td>
<td>终止 switch 或循环</td>
</tr>
<tr>
<td>continue</td>
<td>跳出循环并在顶端开始</td>
</tr>
<tr>
<td>debugger</td>
<td>停止执行 JavaScript，并调用调试函数（如果可用）</td>
</tr>
<tr>
<td>do ... while</td>
<td>执行语句块，并在条件为真时重复代码块</td>
</tr>
<tr>
<td>for</td>
<td>标记需被执行的语句块，只要条件为真</td>
</tr>
<tr>
<td>function</td>
<td>声明函数</td>
</tr>
<tr>
<td>if ... else</td>
<td>标记需被执行的语句块，根据某个条件</td>
</tr>
<tr>
<td>return</td>
<td>退出函数</td>
</tr>
<tr>
<td>switch</td>
<td>标记需被执行的语句块，根据不同的情况</td>
</tr>
<tr>
<td>try ... catch</td>
<td>对语句块实现错误处理</td>
</tr>
<tr>
<td>var</td>
<td>声明变量</td>
</tr>
</tbody>
</table>
<ol start="8">
<li>所有 JavaScript 标识符对大小写敏感。变量 lastName 和 lastname，是两个不同的变量。</li>
<li>JavaScript 程序员倾向于使用以小写字母开头的驼峰大小写</li>
<li>ES2015 引入了两个重要的 JavaScript 新关键词：<code>let</code> 和 <code>const</code>。这两个关键字在 JavaScript 中提供了块作用域（Block Scope）变量（和常量）。在 ES2015 之前，JavaScript 只有两种类型的作用域：全局作用域和函数作用域。</li>
<li>局部变量只能在它们被声明的函数内访问（函数作用域）。</li>
</ol>
<pre><code class="language-JavaScript">// 此处的代码不可以使用 carName

function myFunction() {
  var carName = &quot;porsche&quot;;
  // code here CAN use carName
}

// 此处的代码不可以使用 carName
</code></pre>
<ol start="12">
<li>块作用域<br>
可以使用 let 关键词声明拥有块作用域的变量。<br>
在块 {} 内声明的变量无法从块外访问：</li>
</ol>
<pre><code class="language-JavaScript">{ 
  let x = 10;
}
// 此处不可以使用 x
</code></pre>
<p>通过 var 关键词声明的变量没有块作用域。在块 {} 内声明的变量可以从块之外进行访问。</p>
<ol start="13">
<li>使用 var 关键字重新声明变量会带来问题，在块中重新声明变量也将重新声明块外的变量。<br>
使用 let 关键字重新声明变量可以解决这个问题，在块中重新声明变量不会重新声明块外的变量。</li>
</ol>
<pre><code class="language-JS">var x = 10;
// 此处 x 为 10
{ 
  let x = 6;
  // 此处 x 为 6
}
// 此处 x 为 10
</code></pre>
<ol start="14">
<li>
<p>循环作用域<br>
在循环中使用的变量使用 var 会重新声明循环之外的变量。（for var i=... 会改变原来的var）<br>
在循环中使用的变量使用 let 并没有重新声明循环外的变量。<br>
如果在循环中用 let 声明了变量 i，那么只有在循环内，变量 i 才是可见的。</p>
</li>
<li>
<p>在 HTML 中，通过 var 定义的全局变量会成为 window 变量。通过 let 关键词定义的全局变量不属于 window 对象，不可以使用windows.nameTest()</p>
</li>
<li>
<p>允许在程序的任何位置使用 var 重新声明 JavaScript 变量<br>
在相同的作用域，或在相同的块中，通过 let 重新声明一个 var 变量是不允许的<br>
在相同的作用域，或在相同的块中，通过 let 重新声明一个 let 变量是不允许的<br>
在相同的作用域，或在相同的块中，通过 var 重新声明一个 let 变量是不允许的<br>
在不同的作用域或块中，通过 let 重新声明变量是允许的：</p>
</li>
<li>
<p>通过 var 声明的变量会提升到顶端。</p>
</li>
</ol>
<pre><code class="language-JS">// 在此处，您可以使用 carName
var carName;
</code></pre>
<ol start="18">
<li>可以更改常量对象的属性，可以更改常量数组的元素。</li>
<li>位运算符<br>
<img src="file:///Users/rowan/Documents/Gridea/%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6.png" alt="img" loading="lazy"></li>
<li>在 JavaScript 中，null 的数据类型是对象。</li>
<li>Null 和 undefined</li>
</ol>
<pre><code class="language-JS">typeof undefined              // undefined
typeof null                   // object
null === undefined            // false
null == undefined             // true
</code></pre>
<ol start="22">
<li>当 JavaScript 到达 return 语句，函数将停止执行。</li>
<li>不使用 () 访问函数将返回函数声明而不是函数结果。</li>
<li>如果通过关键词 &quot;new&quot; 来声明 JavaScript 变量，则该变量会被创建为对象。避免字符串、数值或逻辑对象。他们会增加代码的复杂性并降低执行速度。</li>
<li>replace() 只替换首个匹配，区分大小写。</li>
</ol>
<h1 id="chapter-2">Chapter 2</h1>
<h2 id="1-strict-mode-严格模式">1. Strict Mode 严格模式</h2>
<p><code>'use strict mode'</code> at the first line of the JS file.</p>
<h2 id="2-function-函数">2. Function 函数</h2>
<p>函数就是一个值</p>
<pre><code class="language-JavaScript">function logger ( ) {
    // function body
    }

logger(); // invoking the function 调用函数

// 
// Function declaration  可以在声明前就调用函数(Hoisting 提升)
function calcAge1(birthYeah) {
  return 2037 - birthYeah;
}
const age1 = calcAge1(1991);

// Function expression
const calcAge2 = function (birthYeah) {
  return 2037 - birthYeah;
}
const age2 = calcAge2(1991);

console.log(age1, age2);
</code></pre>
<h3 id="21-function-declaration-and-function-expression-函数声明和函数表达式">2.1 Function Declaration and Function Expression 函数声明和函数表达式</h3>
<pre><code class="language-JavaScript">// Function declaration  可以在声明前就调用函数(Hoisting 提升)
function calcAge1(birthYeah) {
  return 2037 - birthYeah;
}
const age1 = calcAge1(1991);

// Function expression
const calcAge2 = function (birthYeah) {
  return 2037 - birthYeah;
}
const age2 = calcAge2(1991);

console.log(age1, age2);
</code></pre>
<h3 id="22-arrow-function-箭头函数">2.2 Arrow Function 箭头函数</h3>
<p>ES6添加到Javascript</p>
<pre><code class="language-Js">const yearsUntilRetirement = (birthYeah, firstName) =&gt; {
  const age = 2037 - birthYeah;
  const retirement = 65 - age;
  // return retirement;
  return `${firstName} retires in ${retirement} years`;
}

console.log(yearsUntilRetirement(1991, 'Jonas')); console.log(yearsUntilRetirement(1980, 'Bob'));
</code></pre>
<p>Ruturn 在返回值后会立刻退出函数，接下来的语句不会再执行。<br>
<img src="https://rowanwang6.github.io/post-images/1659600985927.png" alt="" loading="lazy"></p>
<h2 id="3-arrays">3. Arrays</h2>
<p><code>push</code> 添加元素在数组末尾<br>
<code>unshift</code> 添加元素在数组开头<br>
数组的push会返回添加前数组的长度 unshift 也会<br>
<code>pop</code> 删除在数组末尾的元素<br>
<code>shift</code> 删除在数组开头的元素<br>
<code>indexOf </code>返回元素在数组的索引<br>
<code>includes </code>元素在数组中则返回true</p>
<h2 id="4-objects">4. Objects</h2>
<p>Order doesn't matter at all.</p>
<pre><code class="language-js">// 创建对象
const jonas = {
  firstName: 'Jonas',
  lastName: 'Schmedtmann',
  age: 2037 - 1991,
  job: 'teacher',
  friends: ['Michael', 'Peter', 'Steven']
};

// 需要先计算属性名时，用括号表示。 其余都可以直接使用点属性表示。
console.log(jonas.lastName);
console.log(jonas[&quot;lastName&quot;]);

// 不可以直接将变量名作为属性名，这个时候需要用括号表示。d
const intersted = prompt(&quot;What do you want to know about Jonas?&quot;);
console.log(jonas.intersted);
console.log(jonas[intersted]);

// 添加属性
jonas.location = 'Portugal';
jonas['twitter'] = '@jonasschmedtman';
console.log(jonas);

</code></pre>
<h2 id="5-loops">5. Loops</h2>
<h3 id="51-for-loops">5.1 For Loops</h3>
<p><code>for</code> loops keep running while condition is TRUE.</p>
<h3 id="52-while-loops">5.2 While Loops</h3>
<p><code>break</code><br>
<code>while(1)</code></p>
<h1 id="chapter-3">Chapter 3</h1>
<h2 id="1-dom-manipulation-操作">1. DOM Manipulation 操作</h2>
<p>Document Object Model   -- Web APIs<br>
<img src="https://rowanwang6.github.io/post-images/1661160483209.png" alt="" loading="lazy"><br>
Whatever is in the HTML document also has to be in the DOM.<br>
The DOM is the complete representation of the HTML document, so that we can manipulate it in complex ways.<br>
<code>modal.classList.remove('hidden');</code><br>
<code>document.getElementById()</code><br>
<code>document.querySelector()</code></p>
<h1 id="chapter-4">Chapter 4</h1>
<h2 id="1-js的特点">1. JS的特点</h2>
<ol>
<li>High-level</li>
<li>Garbage-collected</li>
<li>Interpreted / just-in-time compiled  解释型/实时编译型</li>
<li>Prototyp-based object-oriented</li>
<li>First-class functions</li>
<li>Dynamic</li>
<li>Single-threaded</li>
<li>Non-blocking event loop</li>
</ol>
<h2 id="2-javascript-engine">2. Javascript Engine</h2>
<p>Call stack and  Heap<br>
调用栈：代码实际执行的地方，using Execution Contexts(执行上下文)<br>
堆：一个非结构化的内存池，储存了我们的应用程序需要的所有对象。<br>
<img src="https://rowanwang6.github.io/post-images/1661306889795.png" alt="" loading="lazy"><br>
<img src="https://rowanwang6.github.io/post-images/1661307089300.png" alt="" loading="lazy"></p>
<h2 id="3-execution-contexts-执行上下文">3. Execution Contexts 执行上下文:</h2>
<p><img src="https://rowanwang6.github.io/post-images/1661307779189.png" alt="" loading="lazy"><br>
每次当控制器转到可执行代码的时候，就会进入一个执行上下文。执行上下文可以理解为当前代码的执行环境，它会形成一个作用域。JavaScript中的运行环境大概包括三种情况。</p>
<ul>
<li>全局环境：JavaScript代码运行起来会首先进入该环境</li>
<li>函数环境：当函数被调用执行时，会进入当前函数中执行代码</li>
<li>eval（不建议使用，可忽略）<br>
因此在一个JavaScript程序中，必定会产生多个执行上下文，JavaScript引擎会以栈的方式来处理它们，这个栈，我们称其为函数调用栈(call stack)。栈底永远都是全局上下文，而栈顶就是当前正在执行的上下文。https://www.jianshu.com/p/a6d37c77e8db</li>
</ul>
<h3 id="31-whats-inside-execution-contexts">3.1 What's inside Execution Contexts?</h3>
<ul>
<li>Variable Environment 变量环境</li>
<li>Scope chain 作用域链</li>
<li>this Keyword<br>
全局执行上下文Global execution contexts首先被创建(所有函数以外的代码)，然后进入调用栈Call stack，调用函数后，global暂停运行，创建函数的执行上下文入栈，位于栈顶。JS引擎首先执行栈顶的代码，出栈后再继续执行下面的，因为JS是单线程。</li>
</ul>
<h3 id="32-scope-chain">3.2 Scope chain</h3>
<ol>
<li>Global scope 全局作用域</li>
<li>Function scope 函数作用域</li>
<li>Block scope (ES6) 块作用域 花括号里的 <strong>只有let const 有效 var仍然可以在外面访问</strong><br>
<img src="https://rowanwang6.github.io/post-images/1661482373295.png" alt="" loading="lazy"><br>
变量查找 variable lookup 只能查找父作用域  形成作用域链。<br>
作用域链：查找一个变量时先在自己本身作用域中找，当自身作用域中没有时就会一层一层向外找<br>
<img src="https://rowanwang6.github.io/post-images/1661483037005.png" alt="" loading="lazy"></li>
</ol>
<p>##4. Hoisting 提升<br>
<img src="https://rowanwang6.github.io/post-images/1662614381733.png" alt="" loading="lazy"></p>
<h3 id="41-temporal-dead-zonetdz-临时死区">4.1 Temporal Dead Zone(TDZ) 临时死区</h3>
<p>let 和 const 声明的变量不会被提升到作用域顶部，如果在声明前访问这些变量，会导致错误。<br>
这是因为 JavaScript 引擎在扫描代码发现变量声明时，要么将他们提升到作用域顶部（遇到 var 声明），要么将声明放在 TDZ 中（遇到 let 和 const 声明）。访问 TDZ 中的变量会触发运行时错误。只有执行过变量声明语句后，变量才会从 TDZ 中移除，然后方可访问。</p>
<h2 id="5-this-keyword">5. <strong>this</strong> keyword</h2>
<p><img src="https://rowanwang6.github.io/post-images/1663121994402.png" alt="" loading="lazy"><br>
<code>this</code>表示当前对象的一个引用。<br>
<code>this</code>的指向：this不是固定不变的，是根据调用的上下文（执行时环境）改变而改变。<br>
如果单独使用，this 表示全局对象。<br>
在方法中，this 表示该方法所属的对象。<br>
在函数中，this 表示全局对象。<br>
在函数中，在严格模式下，this 是未定义的(undefined)，不然也是全局对象windows。<br>
在事件中，this 表示接收事件的元素。(Event listener)</p>
<h3 id="51-this的指向">5.1 this的指向</h3>
<h4 id="511-全局环境">5.1.1 全局环境</h4>
<p>全局环境就是在<code>&lt;script&gt;&lt;/script&gt;</code>里面，这里的this始终指向的是window对象。</p>
<pre><code class="language-js">&lt;script&gt;
    console.log(this); // 全局环境，即window对象下，this -&gt; window 
&lt;/script&gt;
</code></pre>
<h4 id="512-局部环境">5.1.2 局部环境</h4>
<p>严格模式下，函数中的this为undefined；<br>
1）在全局作用域下直接调用函数，this指向window</p>
<pre><code class="language-js">function fun() {
 	console.log(this);
}
fun(); // fun() 实际上是window.fun(), 所以this -&gt; window
</code></pre>
<p>2）对象函数调用，哪个对象调用就指向哪个对象<br>
<strong>箭头函数没有this关键词，this指向父作用域</strong></p>
<pre><code class="language-js">var obj1 = {
    a: 1,
    fun1: function() {
        console.log(this);
    },
    obj2: {
    	fun2: function() {
    		console.log(this);
    	}
    }
}
obj1.fun1(); // fun1由obj调用，所以this -&gt; obj1
obj1.obj2.fun2(); // fun2由obj2调用，所以this -&gt; obj2
</code></pre>
<p>3）new实例化对象，构造函数中的this指向实例对象</p>
<pre><code class="language-js">var Person = function() {
	this.name = &quot;小刘&quot;; // 这里的this -&gt; obj对象
}
var obj = new Person();
</code></pre>
<p>4）事件中的this<br>
在HTML事件句柄中，this指向了接收事件的HTML元素<br>
<code>&lt;button onclick=&quot;this.style.display='none'&quot;&gt;点我我就消失&lt;/button&gt;</code><br>
5）改变this的指向</p>
<h2 id="4-primitives-vs-reference-values-objects">4. Primitives vs. Reference Values (Objects)</h2>
<p><img src="https://rowanwang6.github.io/post-images/1663145378397.png" alt="" loading="lazy"><br>
对象中的变量（属性）储存方式与其他的不同<br>
浅拷贝 <code>const wjCopy = Object.assign({}, wj2);</code><br>
深克隆 Lo-Dash库</p>
<h1 id="chapter-5">Chapter 5</h1>
<h2 id="1-destructuring-arrays-解构数组">1. Destructuring Arrays 解构数组</h2>
<pre><code class="language-js">const arr = [2, 3, 4];
const [x, y, z] = arr;// 2 3 4
const [a, , b] = arr;// 2 4
[a, b] = [b, a];// 不使用临时变量来交换变量值
const [i, , [j, k]] = [2, 3 , [5,6]]; // 2 5 6 解构
const [p=1, q=1, r=1] = [2, 3]; //  2 3 1 数组未知长度解构

///使用初始值来防止有undefined产生
orderDelivery({ starterIndex = 1, mainIndex = 0, time = '20:00', address }) {
    console.log(
      `Order received! ${this.starterMenu[starterIndex]} and ${this.mainMenu[mainIndex]} will be delivered to ${address} at ${time}`
    );
  }
</code></pre>
<h2 id="2-spread-operators-扩展运算符">2. Spread Operators 扩展运算符</h2>
<p>扩展运算符可以将数组中的每个元素或对象中的每个键值对取出，并且不能在模板字符串中使用。<br>
只能用于Iterables: arrays, strings, maps, sets. NOT objects</p>
<pre><code class="language-js">const arr = [7, 8, 9];
const badNewArr = [1, 2, arr[0], arr[1], arr[2]];
console.log(badNewArr);//1 2 7 8 9

const newArr = [1, 2, ...arr];
console.log(newArr);//1 2 7 8 9
</code></pre>
<h2 id="3-rest-pattern-and-parameters">3. Rest Pattern and Parameters</h2>
<pre><code class="language-js">// 
const [a, b, ...other] = [1, 2, 3, 4, 5];
console.log(other); // [3, 4 , 5]
</code></pre>
<pre><code class="language-js">// 传入多个参数
const add = function (...numbers) {
  console.log(numbers);
  let sum = 0;
  for (let index = 0; index &lt; numbers.length; index++) {
    sum += numbers[index];
  }
  console.log(sum);
};
add(2, 3); // 5
add(5, 3, 7, 2); // 17
</code></pre>
<h2 id="4-short-circuiting-短路">4. Short Circuiting 短路</h2>
<pre><code class="language-js">console.log('' || 'shit'); // ''是falsy value 输出为shit
console.log(0 || undefined || 1 || 24 || 'shit'); // 输出第一个真值Truthy Value，为1，剩下的短路
console.log(7 &amp;&amp; 0);// 输出为0
console.log(1 || 24 || 0 || 'shit'|| 24);// 输出第一个假值Falsy Value，为0，剩下的短路
console.log(null ?? 2)// null 或 undefined 不会被0 和 ' ' 影响。 输出第一不为null 或undefined的 falsy数
</code></pre>
<h2 id="5-logical-assignment-operators-逻辑分配运算符">5. Logical Assignment Operators 逻辑分配运算符</h2>
<p>Introduced in ES2021</p>
<pre><code class="language-js">const rest1 = {
  name: 'capri',
  numGeust: 20,
};

const rest2 = {
  name: 'La',
  owner: 'wjh',
};

// rest1.numGeust = rest1.numGeust || 10;
rest1.numGeust ||= 10;
// rest2.numGeust = rest2.numGeust || 10;
rest2.numGeust ||= 10;
console.log(rest1);//
console.log(rest2);
</code></pre>
<p><code>??=</code> <code>&amp;&amp;=</code><br>
可以用<code>&amp;&amp;</code>代替if else</p>
<pre><code class="language-js">a&gt;b &amp;&amp; console.log('a&gt;b');
</code></pre>
<h2 id="6-forof-loop">6. forof loop</h2>
<pre><code class="language-js">for (const iterator of object) {
  console.log(iterator);
}
</code></pre>
<h2 id="7-enhanced-object-literals-es6">7. Enhanced Object Literals (ES6)</h2>
<pre><code class="language-js">// 1. 定义对象时，属性可以单独定义然后直接放进去
const property1 = {
    dd: 23
};
const mainObj = {
    property2: 'ddd',
    property1
    // 2. 函数简写
    order: function (index){
        return index;
    },
    // 等于 下面的即去掉function关键词和冒号
    // order (index){
    //     return index;
    // }
    // 3. 计算属性名
    [array[2]] : {
        fds: 2,
    }
}
</code></pre>
<h2 id="8-optional-chaining-可选链">8. Optional Chaining (可选链)</h2>
<p><code>?.</code> 链接运算符，如果前面的都不存在 直接返回undefined</p>
<pre><code class="language-js">console.log(restaurant.openingHours.mon?.open);
console.log(restaurant.openingHours?.mon?.open);
console.log(restaurant.openingHours?.thu?.open);

const user = ['wj', 'xik'];
console.log(user?.[0] ?? 'no'); // wj
const user1 = [];
console.log(user?.[0] ?? 'no'); // no
</code></pre>
<h2 id="9-looping-objects-关于对象的循环">9. Looping objects 关于对象的循环</h2>
<p><code>Object.keys(objName)</code> 键<br>
<code>Object.values(objName)</code> 值<br>
<code>Object.entries(objName)</code>  键值对<br>
<code>obj.property.entries()</code></p>
<h2 id="10-sets-集">10. Sets 集</h2>
<p>没有重复的值，需要传入可迭代(string，array)，没有键值对，没有index(不能写<code>set1[0]</code>)。<br>
主要作用：<br>
<code>const setExample = new Set(iterable)</code></p>
<pre><code class="language-js">const ordersSet = new Set([
  'Pasta',
  'Pizza',
  'Pizza',
  'Risotto',
  'Pasta',
  'Pizza',
]);
console.log(ordersSet);//{'Pasta', 'Pizza', 'Risotto'}
console.log(new Set('Jonas')); //{'J', 'o', 'n', 'a', 's'}
console.log(ordersSet.size); // 3
console.log(ordersSet.has('Pizza')); // true
console.log(ordersSet.has('Bread')); // false
ordersSet.add('Garlic Bread');
ordersSet.add('Garlic Bread');
ordersSet.delete('Risotto');
// ordersSet.clear(); // {}
console.log(ordersSet); // {'Pasta', 'Pizza', 'Garlic Bread'}
// for (const order of ordersSet) console.log(order);

const staff = ['Waiter', 'Chef', 'Waiter', 'Manager', 'Chef', 'Waiter'];
const staffUnique = [...new Set(staff)];
console.log(staffUnique); // ['Waiter', 'Chef', 'Manager']

console.log(
  new Set(['Waiter', 'Chef', 'Waiter', 'Manager', 'Chef', 'Waiter']).size
); // 3

console.log(new Set('jonasschmedtmann').size); // 11，一种计算string的长度的方法
</code></pre>
<h2 id="11-maps-字典">11. Maps 字典</h2>
<p>objects中的key基本上都是string，但maps中的key可以为各种类型（objects arrays maps）</p>
<pre><code class="language-js">const rest = new Map();
rest.set('name', 'Classico Italiano');
rest.set(1, 'Firenze, Italy');
console.log(rest.set(2, 'Lisbon, Portugal'));

rest
  .set('categories', ['Italian', 'Pizzeria', 'Vegetarian', 'Organic'])
  .set('open', 11)
  .set('close', 23)
  .set(true, 'We are open :D')
  .set(false, 'We are closed :(');

console.log(rest.get('name')); // Classico Italiano
console.log(rest.get(true)); // We are open :D
console.log(rest.get(1)); // We are closed :(

const time = 8;
console.log(rest.get(time &gt; rest.get('open') &amp;&amp; time &lt; rest.get('close'))); // time &gt; rest.get('open') &amp;&amp; time &lt; rest.get('close') 如果为真 打印 We are open :D

console.log(rest.has('categories')); // true
rest.delete(2);
// rest.clear();

const arr = [1, 2];
rest.set(arr, 'Test');
// rest.get([1,2]) 会返回undefined因为在堆中，这两个数组不是同一个地址
rest.set(document.querySelector('h1'), 'Heading');
console.log(rest.get(arr));// Test
</code></pre>
<pre><code class="language-js">// Maps: Iteration
const question = new Map([
  ['question', 'What is the best programming language in the world?'],
  [1, 'C'],
  [2, 'Java'],
  [3, 'JavaScript'],
  ['correct', 3],
  [true, 'Correct 🎉'],
  [false, 'Try again!'],
]);
console.log(question);

// Convert object to map
console.log(Object.entries(openingHours));
const hoursMap = new Map(Object.entries(openingHours));
console.log(hoursMap);

// Quiz app
console.log(question.get('question'));
for (const [key, value] of question) {
  if (typeof key === 'number') console.log(`Answer ${key}: ${value}`);
}
// const answer = Number(prompt('Your answer'));
const answer = 3;
console.log(answer);

console.log(question.get(question.get('correct') === answer));

// Convert map to array
console.log([...question]);
// console.log(question.entries());
console.log([...question.keys()]);
console.log([...question.values()]);
</code></pre>
<h2 id="12-which-data-structure">12. Which data structure?</h2>
<p><img src="https://rowanwang6.github.io/post-images/1663576489745.png" alt="" loading="lazy"><br>
<img src="https://rowanwang6.github.io/post-images/1663577904008.png" alt="" loading="lazy"></p>
<h2 id="13-working-with-strings">13. Working with Strings</h2>
<pre><code class="language-js">const airline = 'TAP Air Portugal';
const plane = 'A320';
// position
console.log(airline[2]); // P
console.log('wjsb'[1]); // j
// length method
console.log(airline.length); //16
console.log('wjsb'.length); // 4
// indexOf method
console.log(airline.indexOf('r')); // 6
console.log(airline.lastIndexOf('r')); // 10
console.log(airline.indexOf('Portugal')); // 8
// slice 切片 获得substring [start,end) 结尾不算进去 substring长度 = end - start
console.log(airline.slice(4)); // Air Portugal
console.log(airline.slice(4, 7)); // Air
// 提取第一个单词，以空格的index为end参数
console.log(airline.slice(0, airline.indexOf(' ')));
// 提取最后一个单词，以空格的lastindex + 1为start参数
console.log(airline.slice(airline.lastIndexOf(' ') + 1));
// 是否选到中间座位
const checkMiddleSeat = function (seat) {
// B and E are middle seats
const s = seat.slice(-1);
if (s === 'B' || s === 'E') console.log('You got the middle seat 😬');
  else console.log('You got lucky 😎');
};
checkMiddleSeat('11B');
checkMiddleSeat('23C');
checkMiddleSeat('3E');

const airline = 'TAP Air Portugal';
console.log(airline.toLowerCase()); // tap air portugal
console.log(airline.toUpperCase()); // TAP AIR PORTUGAL

// Fix capitalization in name
const passenger = 'jOnAS';
const passengerLower = passenger.toLowerCase(); // jonas
const passengerCorrect =
  passengerLower[0].toUpperCase() + passengerLower.slice(1);
console.log(passengerCorrect); // Jonas

// tirm method  修剪字符串 去掉空格以及换行符
const email = 'hello@jonas.io';
const loginEmail = '  Hello@Jonas.Io \n';

// const lowerEmail = loginEmail.toLowerCase();
// const trimmedEmail = lowerEmail.trim();
const normalizedEmail = loginEmail.toLowerCase().trim();
console.log(normalizedEmail);
console.log(email === normalizedEmail);

// replace method
const priceGB = '288,97£';
const priceUS = priceGB.replace('£', '$').replace(',', '.');
console.log(priceUS);

const announcement =
  'All passengers come to boarding door 23. Boarding door 23!';

console.log(announcement.replace('door', 'gate'));
console.log(announcement.replaceAll('door', 'gate'));
console.log(announcement.replace(/door/g, 'gate'));

// Booleans
const plane = 'Airbus A320neo';
console.log(plane.includes('A320'));
console.log(plane.includes('Boeing'));
console.log(plane.startsWith('Airb'));

if (plane.startsWith('Airbus') &amp;&amp; plane.endsWith('neo')) {
  console.log('Part of the NEW Airbus family');
}

// Practice exercise
const checkBaggage = function (items) {
  const baggage = items.toLowerCase();

  if (baggage.includes('knife') || baggage.includes('gun')) {
    console.log('You are NOT allowed on board');
  } else {
    console.log('Welcome aboard!');
  }
};

checkBaggage('I have a laptop, some Food and a pocket Knife');
checkBaggage('Socks and camera');
checkBaggage('Got some snacks and a gun for protection');

// Split and join
console.log('a+very+nice+string'.split('+'));
console.log('Jonas Schmedtmann'.split(' '));

const [firstName, lastName] = 'Jonas Schmedtmann'.split(' ');

// join method
const newName = ['Mr.', firstName, lastName.toUpperCase()].join(' ');
console.log(newName);

const capitalizeName = function (name) {
  const names = name.split(' ');
  const namesUpper = [];

  for (const n of names) {
    // namesUpper.push(n[0].toUpperCase() + n.slice(1));
    namesUpper.push(n.replace(n[0], n[0].toUpperCase()));
  }
  console.log(namesUpper.join(' '));
};

capitalizeName('wang xiangkun');
capitalizeName('jonas schmedtmann');

// Padding 填充 padStart(整个字符串的长度，要添加的字符)
const message = 'Go to gate 23!';
console.log(message.padStart(20, '+').padEnd(30, '+'));
console.log('Jonas'.padStart(20, '+').padEnd(30, '+'));

const maskCreditCard = function (number) {
  const str = number + '';
  const last = str.slice(-4);
  return last.padStart(str.length, '*');
};

console.log(maskCreditCard(64637836));
console.log(maskCreditCard(43378463864647384));
console.log(maskCreditCard('334859493847755774747'));

// repeat method
const message2 = 'Bad waether... All Departues Delayed... ';
console.log(message2.repeat(5));

const planesInLine = function (n) {
  console.log(`There are ${n} planes in line ${'🛩'.repeat(n)}`);
};
planesInLine(5);
planesInLine(3);
planesInLine(12);
</code></pre>
<h3 id="装箱"><strong>装箱</strong></h3>
<p>Strings are primitives, why do they have methods? Shouldn't methods only be available on objects such as a race?<br>
JavaScript will automatically behind the scenes convert that string primitive to a string object with the same content. -- boxing</p>
<pre><code class="language-js">// Boxing 装箱
console.log(new String('jonas'));
console.log(typeof new String('jonas')); // object
console.log(typeof new String('jonas').slice(1));// string
</code></pre>
<h1 id="chapter-6-functions">Chapter 6 Functions</h1>
<h2 id="1-how-passing-arguments-works-values-vs-reference-值传递">1. How Passing Arguments Works: Values vs. Reference  值传递</h2>
<p>js中只有按值传递(passing by value)，没有按参考传递(passing by reference)。对传入函数的对象来说，传入的内存地址，也只是一个包含内存地址的值。具体参考<a href="#4-primitives-vs-reference-values-objects">内存章节</a>。</p>
<pre><code class="language-js">const flight = 'LH234';
const jonas = {
  name: 'Jonas Schmedtmann',
  passport: 24739479284,
};

const checkIn = function (flightNum, passenger) {
  flightNum = 'LH999'; //无效 跟形参不是一个地址，只是单纯的复制了值
  passenger.name = 'Mr. ' + passenger.name;// 有效 复制了值，但这个值的内容是地址，因此改变的还是原来heap里的那个jonas对象
};
</code></pre>
<h2 id="2-first-class-functions-函数一等优先-vs-higer-order-functions-高阶函数">2. First-Class functions 函数一等优先 vs Higer-order functions 高阶函数</h2>
<p>First-class Function（头等函数） 当一门编程语言的函数可以被当作变量一样用时，则称这门语言<strong>拥有</strong>头等函数。<br>
js里的函数就是值，可以被当作参数传递给其他函数，可以作为另一个函数的返回值，还可以被赋值给一个变量。函数是js对象中的一种，对象大多数都有方法，例如function.name()。<br>
高阶函数是至少具有下列功能之一的函数: 1. 将一个或多个函数作为<strong>参数</strong>(即过程参数)。 2. 返回一个函数作为结果。 所有其他函数都是一阶函数。<br>
<img src="https://rowanwang6.github.io/post-images/1663741151518.png" alt="" loading="lazy"></p>
<h2 id="3-高阶函数-回调函数">3. 高阶函数 回调函数</h2>
<pre><code class="language-js">const oneWord = function (str) {
  return str.replace(/ /g, '').toLowerCase();
};

const upperFirstWord = function (str) {
  const [first, ...others] = str.split(' ');
  return [first.toUpperCase(), ...others].join(' ');
};

// Higher-order function
const transformer = function (str, fn) { // transformer 调用其他函数，为高阶函数，面对对象编程中重要的一环；调用的function被称为回调函数 callback functions
  console.log(`Original string: ${str}`);
  console.log(`Transformed string: ${fn(str)}`);
  console.log(`Transformed by: ${fn.name}`);
};

transformer('JavaScript is the best!', upperFirstWord);// 回调函数
transformer('JavaScript is the best!', oneWord);// 回调函数
</code></pre>
<h2 id="4-函数返回函数">4. 函数返回函数</h2>
<pre><code class="language-js">const greeterHey = greet('Hey'); // greet()的结果是返回一个函数，所以现在greeterHey也是一个函数，就是greet()返回的那个函数，参数是name。因此greeterHey = function (name) {console.log(`${greeting} ${name}`);};
greeterHey('Jonas'); // Hey Jonas
greeterHey('Steven'); // Hey Steven

greet('Hello')('Jonas'); // Hello Jonas

const greet1 = greeting =&gt; name =&gt; console.log(`${greeting} ${name}`);
greet1('hello')('shit');// hello shit
</code></pre>
<h2 id="5-call-and-apply-method">5. Call and apply method</h2>
<pre><code class="language-js">const lufthansa = {
  airline: 'Lufthansa',
  iataCode: 'LH',
  bookings: [],
  // book: function () {}
  book(flightNum, name) {
    console.log(
      `${name} booked a seat on ${this.airline} flight ${this.iataCode}${flightNum}`
    );
    this.bookings.push({
      flight: `${this.iataCode}${flightNum}`,
      name,
    });
  },
};

lufthansa.book(239, 'Jonas Schmedtmann');
lufthansa.book(635, 'John Smith');

const eurowings = {
  airline: 'Eurowings',
  iataCode: 'EW',
  bookings: [],
};

const book = lufthansa.book;
// Does NOT work
// book('123', 'shit');
//this keyword depends on how the function is called.
//所以在这里调用book()，this指向的是window，因此this.airline是undefined，this.iataCode是undefined，this.bookings是undefined

// Call method
book.call(eurowings, 23, 'Sarah Williams'); // 手动设置this指向eurowings，因此this.airline是eurowings，this.iataCode是EW，this.bookings是eurowings.bookings
book.call(lufthansa, 239, 'Mary Cooper');
// lufthansa.book.call(lufthansa, 239, 'Mary Cooper'); 结果与上面一样

// Apply method
const flightData = [583, 'George Cooper'];
book.apply(eurowings, flightData); // apply()的第二个参数是一个数组，其余与call()一样，但由于es6加入了扩展运算符，所以一般不用apply()了，而是用：
book.call(eurowings, ...flightData);
</code></pre>
<h2 id="6-bind-method">6. bind method</h2>
<pre><code class="language-js">// Bind method
book.call(eurowings, 23, 'Sarah Williams');
const bookEW = book.bind(eurowings); // bind()返回一个新的函数，这个函数的this指向bind()的第一个参数.
const bookLH = book.bind(lufthansa);
const bookLH23 = book.bind(lufthansa, 23); // bind()的第二个参数是23，因此调用bookLH23时只需要传入一个参数，即name. 固定函数的第一个传入参数为23
bookLH(23, 'Steven Williams');
bookLH23('Steven Williams');

// With event listeners
lufthansa.planes = 300;
lufthansa.buyPlane = function () {
  console.log(this);
  this.planes++;
  console.log(this.planes);
};
document
  .querySelector('.buy')
  .addEventListener('click', lufthansa.buyPlane.bind(lufthansa));
// .addEventListener('click', lufthansa.buyPlane());? why

// Partial application
const addTax = (rate, value) =&gt; value + value * rate;
console.log(addTax(0.1, 200)); // 220

const addVAT = addTax.bind(null, 0.23); // bind()的第一个参数是null，因为addTax()的this没有用到，所以可以传入null，第二个参数是0.23，即rate

// 用函数return函数写一遍
const addVATrate = function (rate) {
  return function (value) {
    return value + value * rate;
  };
};
const addVAT1 = addVATrate(0.23); //类似解构 固定住rate的值
console.log(addVAT1(100)); //123
</code></pre>
<h2 id="7-immediately-invoked-function-expressionsiife-立即调用函数表达式">7. Immediately Invoked Function Expressions(IIFE) 立即调用函数表达式</h2>
<pre><code class="language-js">// IIFE 立即执行函数
(function () {
  console.log('This will never run again');
  const isPrivate = 23; //私有变量
})();

// console.log(isPrivate); //报错
(() =&gt; console.log('This will ALSO never run again'))(); //立即执行函数 箭头

{
  const isPrivate = 23;
  var notPrivate = 46;
}

// console.log(isPrivate); //报错
console.log(notPrivate); //46
</code></pre>
<h2 id="8-closures-闭包">8. Closures 闭包</h2>
<pre><code class="language-js">// Closures
const secureBooking = function () {
  let passengerCount = 0;
  return function () {
    passengerCount++;
    console.log(`${passengerCount} passengers`);
  };
};

const booker = secureBooking();
booker();
booker();
booker();
</code></pre>
<p><img src="https://rowanwang6.github.io/post-images/1663827787143.png" alt="" loading="lazy"><br>
secureBooking() return function后，它的执行上下文出栈，但secureBooking()出栈后，为什么booker()还能继续访问passengerCount，使它累加？<br>
We can say a closure makes a function remember all the variable that existed at the function's birthplace essentially.<br>
<img src="https://rowanwang6.github.io/post-images/1663829053927.png" alt="" loading="lazy"><br>
<img src="https://rowanwang6.github.io/post-images/1663829275859.png" alt="" loading="lazy"><br>
闭包就像函数的一个背包，里面包含了函数被创建时的环境里的所有的变量。但闭包不能从代码访问，可以用console.dir()看。</p>
<h1 id="chapter-7-arrays">Chapter 7 Arrays</h1>
<h2 id="1-simply-array-methods">1. Simply Array methods</h2>
<pre><code class="language-js">let arr = ['a', 'b', 'c', 'd', 'e'];

// SLICE 切片
console.log(arr.slice(2)); // c d e
console.log(arr.slice(2, 4)); // c d
console.log(arr.slice(-2)); // d e
console.log(arr.slice(-1)); // e
console.log(arr.slice(1, -2)); // b c
console.log(arr.slice()); // a b c d e
console.log([...arr]); // a b c d e
// slice() 和 ...arr 都是浅拷贝 都不会修改原数组

// SPLICE 拼接
// 会修改原数组 而且第二个参数为长度，不是endIndex
// 主要用来删除数组元素
arr.splice(-1); // e
console.log(arr); // a b c d
// arr.splice(, ); // b c
console.log(arr); // a b c
let arr1 = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'];
arr1.splice(5, 2); // f g
console.log(arr1); // a b c d e h i j
arr1.splice(5, 2, 'f', 'g'); // 如果第二个参数为0，即可实现插入元素
console.log(arr1); // a b c d e f g j

// REVERSE
// 会修改原数组
arr = ['a', 'b', 'c', 'd', 'e'];
const arr2 = ['j', 'i', 'h', 'g', 'f'];
console.log(arr2.reverse());
console.log(arr2);

// CONCAT concatenate 连接 串联
// 不会修改原数组
const letters = arr.concat(arr2);
console.log(letters);
console.log([...arr, ...arr2]);

// JOIN
console.log(letters.join(' - '));
</code></pre>
<h2 id="2-at-method">2. at() method</h2>
<pre><code class="language-js">// The new at Method
const arr = [23, 11, 64];
console.log(arr[0]);
console.log(arr.at(0));

// getting last array element
console.log(arr[arr.length - 1]);
console.log(arr.slice(-1)[0]);
console.log(arr.at(-1));// 最简洁

console.log('jonas'.at(0));
console.log('jonas'.at(-1));
</code></pre>
<h2 id="3-foreach">3. forEach()</h2>
<pre><code class="language-js">const movements = [200, 450, -400, 3000, -650, -130, 70, 1300];

for (const [i, movement] of movements.entries()) {
  if (movement &gt; 0) {
    console.log(`Movement ${i + 1}: You deposited ${movement}`);
  } else {
    console.log(`Movement ${i + 1}: You withdrew ${Math.abs(movement)}`);
  }
}

// forEach是高阶函数，需要一个回调函数，函数参数是forEach传入的每一个element, index, array. 顺序固定。forEach不会返回任何值，无法break，continue，return
movements.forEach(function (movement, i, arry) {
  if (movement &gt; 0) {
    console.log(`Movement ${i + 1}: You deposited ${movement}`);
  } else {
    console.log(`Movement ${i + 1}: You withdrew ${Math.abs(movement)}`);
  }
});
// 0: function(200)
// 1: function(450)
// 2: function(400)
// ...

// Map
const currencies = new Map([
  ['USD', 'United States dollar'],
  ['EUR', 'Euro'],
  ['GBP', 'Pound sterling'],
]);
// array都是本身，不是每次循环的一列！
currencies.forEach(function (el, i, array) {
  console.log(`${i}: ${el}`);
  console.log(array);
});

// Set
const currenciesUnique = new Set(['USD', 'GBP', 'USD', 'EUR', 'EUR']);
console.log(currenciesUnique);
// 由于Set没有index，为了保持参数的一致性，这里index=value
currenciesUnique.forEach(function (el, i, array) {
  console.log(`${i}: ${el}`);
  console.log(array);
});
</code></pre>
<h2 id="4-data-transformation-map映射-filter-reduce">4. Data Transformation map()映射, filter, reduce</h2>
<figure data-type="image" tabindex="1"><img src="https://rowanwang6.github.io/post-images/1664240537087.png" alt="" loading="lazy"></figure>
<pre><code class="language-js">
// filter
// const deposit = movements.filter(mov =&gt; mov &gt; 0);
const deposit = movements.filter(function (mov) {
  return mov &gt; 0;
});
console.log(movements);
console.log(deposit);

const withdrawals = movements.filter(mov =&gt; mov &lt; 0);
console.log(withdrawals);

// reduce
//accumulator -&gt; snowball 累加
const balance = movements.reduce(function (accumulator, current, index, arr) {
  console.log(index, accumulator);
  return accumulator + current;
}, 0);

// maximum value using reduce
const max = movements.reduce((acc, cur) =&gt; {
  if (acc &gt; cur) return acc;
  else return cur;
}, movements[0]);// 使用reduce来求最大值时，第一个返回值要注意不要设成0
console.log(max);
</code></pre>
<h2 id="5-find-method">5. find() method</h2>
<pre><code class="language-js">// find 返回找到的第一个
const firstWithdrawl = movements.find(el =&gt; el &lt; 0);
console.log(firstWithdrawl);
</code></pre>
<h2 id="6-some-method-and-every-method">6. some() method and every() method</h2>
<pre><code class="language-js">// some() method
// 与includes()不同，some()可以判断条件，比等式范围更大
console.log(movements);
console.log(movements.some(el =&gt; el &gt; 0));// true

// every
console.log(movements.every(el =&gt; el &gt; 0));// false
console.log(movements.every(el =&gt; typeof el === 'number'));// true
</code></pre>
<h2 id="7-flat-and-flatmap">7. flat() and flatMap()</h2>
<pre><code class="language-js">const arr = [1, [2, 3], 4];
const arr1 = [1, [2, 3, [4, 5], 6], 7];
console.log(arr.flat()); //1234
console.log(arr1.flat()); //123[4,5]67
console.log(arr1.flat(2)); //1234567  Depth 参数

// const accountsMovenment = accounts.map(el =&gt; el.movements);
// console.log(accountsMovenment);

// const allMovement = accountsMovenment.flat();
// console.log(allMovement);

// const overalBalance = allMovement.reduce((acc, el) =&gt; acc + el);
// console.log(overalBalance);

// const overalBalance2 = accounts
//   .map(el =&gt; el.movements)
//   .flat()
//   .reduce((acc, el) =&gt; acc + el);
// console.log(overalBalance2);

const overalBalance2 = accounts
  .flatMap(el =&gt; el.movements) // flatMap 只能一层深度， = .map().flat()
  .reduce((acc, el) =&gt; acc + el);
console.log(overalBalance2);
</code></pre>
<h2 id="8-sorting-array">8. Sorting array</h2>
<h1 id="其他">其他</h1>
<p>带sourcemap打包，然后将sourcemap删除掉再上线<br>
跨域问题来自于浏览器的同源策略，即当协议、域名、端口号任意一个不同时，都会引发跨域问题。<br>
<img src="https://rowanwang6.github.io/post-images/1663232537722.png" alt="" loading="lazy"></p>

            </article>
          </div>
          <div class='entry-meta-bottom'>
            <div class="entry-categories">
              <p>
                <span>Categories</span>
                
                  
                    
                  <a href="https://rowanwang6.github.io/tag/web/" title="View all posts in web">web</a>
                    
                    
                    
                  <a href="https://rowanwang6.github.io/tag/CV/" title="View all posts in Computer Vison">Computer Vison</a>
                    
                    
                    
                  <a href="https://rowanwang6.github.io/tag/myself/" title="View all posts in Myself">Myself</a>
                    
                    
              </p>
            </div>
            <div class="entry-tags">
              <p><span>Tags</span>
              </p>
            </div>
          </div>
          <div class="author-meta">
            <div class="author">
              <img alt='' src="https://rowanwang6.github.io/images/avatar.png?v=1695113523701" class='avatar avatar-72 photo' height='72' width='72'>
              <span>WRITTEN BY: &nbsp;&nbsp;&nbsp;<a href='https://rowanwang6.github.io'>Rowan</a> </span>
            </div>
            <div class="bio">
              <p>Hi! Hope you enjoy my sharing. If there is any error or advice, please inform me.</p>
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </div>
          </div>
        </div>
          
            <nav class="navigation pagination" role="navigation">
              <h2 class="screen-reader-text">Posts navigation</h2>
              <div class="nav-links">
                <a class="next page-numbers" href="https://rowanwang6.github.io/post/css/">下一篇->CSS</a>
              </div>
            </nav>
          
      </div>
      <section id="comments" class="comments">
        
      </section>
    </div>
  </div>
  <footer id="site-footer" class="site-footer" role="contentinfo">
    <h1>
        <a href="https://rowanwang6.github.io"> Rowan&#39;s Page </a>
    </h1>
    <p class="site-description"></p>
    <div id="menu-footer" class="menu-container menu-footer" role="navigation">
        <div class="menu">
            <ul id="menu-footer-items" class="menu-footer-items">
            </ul>
        </div>
    </div>
    <ul class="social-media-icons">
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    </ul>
    <div class="design-credit">
        <p>xkwang7-c@my.cityu.edu.hk</p>
    </div>
</footer>
<script>
    hljs.initHighlightingOnLoad()
</script>
<script src="https://rowanwang6.github.io/media/scripts/lib/jquery.min.js"></script>
<script src="https://rowanwang6.github.io/media/scripts/lib/jquerymigrate.js"></script>
<script src="https://rowanwang6.github.io/media/scripts/lib/production.min.js"></script>

</div>
</body>
</html>

